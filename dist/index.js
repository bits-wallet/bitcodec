(()=>{"use strict";var e={727:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toDouble=t.intHighLow=t.uintHighLow=t.onesComplement=t.assert=t.Int53Type=void 0;const n=4294967295;var o;(o=t.Int53Type||(t.Int53Type={})).Int64BE="Int64BE",o.Int64LE="Int64LE",o.UInt64BE="UInt64BE",o.UInt64LE="UInt64LE",t.assert=(e,t)=>{if(!e)throw new Error(t)},t.onesComplement=e=>((e=~e)<0&&(e=2147483648+(2147483647&e)),e),t.uintHighLow=e=>{(0,t.assert)(e>-1&&e<=9007199254740991,"number out of range"),(0,t.assert)(Math.floor(e)===e,"number must be an integer");var o=0,r=4294967295&e,c=r<0?2147483648+(2147483647&e):r;return e>n&&(o=(e-c)/4294967296),[o,c]},t.intHighLow=e=>{if(e>-1)return(0,t.uintHighLow)(e);var o=(0,t.uintHighLow)(-e),r=(0,t.onesComplement)(o[0]),c=(0,t.onesComplement)(o[1]);return c===n?(r+=1,c=0):c+=1,[r,c]},t.toDouble=(e,n,o)=>o&&0!=(2147483648&e)?(e=(0,t.onesComplement)(e),n=(0,t.onesComplement)(n),(0,t.assert)(e<2097152,"number too small"),-(4294967296*e+n+1)):((0,t.assert)(e<2097152,"number too large"),4294967296*e+n)},716:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.readInt53=t.writeInt53=t.Int53Type=void 0;var o=n(727);Object.defineProperty(t,"Int53Type",{enumerable:!0,get:function(){return o.Int53Type}});var r=n(733);Object.defineProperty(t,"writeInt53",{enumerable:!0,get:function(){return r.write}});var c=n(120);Object.defineProperty(t,"readInt53",{enumerable:!0,get:function(){return c.read}})},120:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.read=void 0;const o=n(727);t.read=(e,t,n=0)=>{const r=e.endsWith("BE"),[c,i]=r?[t.readUInt32BE(n),t.readUInt32BE(n+4)]:[t.readUInt32LE(n+4),t.readUInt32LE(n)],s=e.startsWith("Int");return(0,o.toDouble)(c,i,s)}},733:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.write=void 0;const o=n(727);t.write=(e,t,n,r=0)=>{const c=e.startsWith("Int")?(0,o.intHighLow)(t):(0,o.uintHighLow)(t);e.endsWith("BE")?(n.writeUInt32BE(c[0],r),n.writeUInt32BE(c[1],r+4)):(n.writeUInt32LE(c[1],r),n.writeUInt32LE(c[0],r+4))}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rangeError=t.typeError=t.checkDefined=t.checkBufferLengthForDecode=t.checkBufferLengthForEncode=t.checkLength=void 0,t.checkLength=(e,t,n)=>{if(t!==n)throw new RangeError(`${e} Codec: value length is not equal codec length. valueLength = ${t}, codecLength = ${n}.`)},t.checkBufferLengthForEncode=(e,t,n,o)=>{if(t.length-n<o)throw new RangeError(`${e} Codec: buffer is too small. buffer.length = ${t.length}, offset = ${n}, codecLength = ${o}.`)},t.checkBufferLengthForDecode=(e,t,n,o)=>{if(n-t<o)throw new RangeError(`${e} Codec: not enough data for decode. offset = ${t}, end = ${n}, codecLength = ${o}.`)},t.checkDefined=(e,t,n="object")=>{if(void 0===t)throw new TypeError(`${e} Codec: value must be ${n} but got undefined.`);if("buffer"===n&&!Buffer.isBuffer(t))throw new TypeError(`${e} Codec: value must be ${n} but got undefined.`)},t.typeError=(e,t)=>{throw new TypeError(`${e} Codec: ${t}.`)},t.rangeError=(e,t)=>{throw new RangeError(`${e} Codec: ${t}.`)}},68:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CAllBuffer=void 0,t.CAllBuffer=class{length;encodingLength=e=>e?.length||this.length;encodeBytes;decodeBytes;constructor(){this.length=0,this.encodeBytes=0,this.decodeBytes=0}encode=(e,t,n=0)=>{if(this.length=e.length,this.encodeBytes=e.length,this.decodeBytes=e.length,!Buffer.isBuffer(e))throw new TypeError("value must be a Buffer instance");if(!t)return Buffer.from(e);if(n+this.length>t.length)throw new RangeError("destination buffer is too small");return e.copy(t,n),t};decode=(e,t=0,n)=>{if(this.length=e.length,this.encodeBytes=e.length,this.decodeBytes=e.length,n||(n=e.length),this.length=e.length-t,t+this.length>n)throw new RangeError("not enough data for decode");return Buffer.from(e.slice(t,t+this.length))}}},157:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CArray=void 0;const i=c(n(882)),s=n(758);t.CArray=class{codecName="CArray";length;anyCodec;calcLength=e=>i.calcAllLength(e,this.anyCodec.encodingLength);encodingLength=e=>((0,s.checkDefined)(this.codecName,e,"array"),void 0===e?0:((0,s.checkLength)(this.codecName,e.length,this.length),this.calcLength(e)));encodeBytes;decodeBytes;constructor(e,t){this.length=e,this.anyCodec=t,this.encodeBytes=e,this.decodeBytes=e}encode=(e,t,n=0)=>{(0,s.checkLength)(this.codecName,e.length,this.length),t||(t=Buffer.allocUnsafe(this.calcLength(e)));const o=this.anyCodec.encode,r=this.anyCodec.encodeBytes;return this.encodeBytes=i.calcAllLength(e,(function(e,n,c){return o(e,t,c),r}),n)-n,t};decode=(e,t=0,n)=>{t||(t=0);const o=new Array(this.length),r=this.anyCodec.decode,c=this.anyCodec.decodeBytes;return this.decodeBytes=i.calcAllLength(o,(function(t,i,s){return o[i||0]=r(e,s,n),c}),t)-t,o}}},483:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CBuffer=void 0;const o=n(758);t.CBuffer=class{codecName="Buffer";length;encodingLength=()=>this.length;encodeBytes;decodeBytes;constructor(e){this.length=e,this.encodeBytes=e,this.decodeBytes=e}encode=(e,t,n=0)=>((0,o.checkDefined)(this.codecName,e,"buffer"),(0,o.checkLength)(this.codecName,e.length,this.length),t?((0,o.checkBufferLengthForEncode)(this.codecName,t,n,this.length),e.copy(t,n),t):Buffer.from(e));decode=(e,t=0,n)=>(n||(n=e.length),(0,o.checkBufferLengthForDecode)(this.codecName,t,n,this.length),Buffer.from(e.slice(t,t+this.length)))}},193:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CNumber=void 0;const o=n(716);t.CNumber=class{length;write;read;encodingLength=e=>this.length;encodeBytes;decodeBytes;constructor(e,t){this.length=t,this.encodeBytes=t,this.decodeBytes=t,Buffer.prototype["write"+e]?this.write=(t,n,o)=>t["write"+e](n,o):this.write=(t,n,r)=>(0,o.writeInt53)(e,n,t,r),Buffer.prototype["read"+e]?this.read=(t,n)=>t["read"+e](n):this.read=(t,n)=>(0,o.readInt53)(e,t,n)}encode=(e,t,n=0)=>(t=t||Buffer.allocUnsafe(this.length),this.write(t,e,n),t);decode=(e,t=0,n)=>n?this.read(e.slice(t,n),0):this.read(e,t)}},759:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CObject=void 0;const o=n(758);t.CObject=class{codecName="CObject";items;encodeBytes;decodeBytes;encodingLength;constructor(e){this.items=e.map((e=>Array.isArray(e)?{name:e[0],type:e[1]}:e)),this.encodeBytes=0,this.decodeBytes=0,this.encodingLength=e=>((0,o.checkDefined)(this.codecName,e,"object"),void 0===e?0:this.items.reduce(((t,n)=>{const o=e[n.name];return t+n.type.encodingLength(o)}),0))}encode=(e,t,n=0)=>{const r=n,c=this.encodingLength(e);return void 0===t?t=Buffer.allocUnsafe(c):(0,o.checkBufferLengthForEncode)(this.codecName,t,n,c),this.items.forEach((o=>{const r=e[o.name];o.type.encode(r,t,n),n+=o.type.encodeBytes})),this.encodeBytes=n-r,t};decode=(e,t=0,n)=>{let o={};const r=t;return this.items.forEach((r=>{const c=r.type.decode(e,t,n);t+=r.type.decodeBytes,o[r.name]=c})),this.decodeBytes=t-r,o}}},129:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CString=void 0;const o=n(758),r=n(483);t.CString=class{codecName="String";length;bufferCodec;encodingType;encodingLength=e=>this.length;encodeBytes;decodeBytes;constructor(e,t="utf8"){this.length=e,this.encodingType=t,this.bufferCodec=new r.CBuffer(this.length),this.encodeBytes=e,this.decodeBytes=e}encode=(e,t,n=0)=>((0,o.checkLength)(this.codecName,Buffer.byteLength(e,this.encodingType),this.length),t?((0,o.checkBufferLengthForEncode)(this.codecName,t,n,this.length),t.write(e,n,length,this.encodingType),t):Buffer.from(e,this.encodingType));decode=(e,t=0,n)=>((0,o.checkBufferLengthForDecode)(this.codecName,t,n||e.length,this.length),this.bufferCodec.decode(e,t,n).toString(this.encodingType))}},161:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CVarArray=void 0;const i=c(n(882)),s=n(758);t.CVarArray=class{codecName="CVarArray";length=-1;lengthType;anyCodec;calcLength=e=>i.calcAllLength(e,this.anyCodec.encodingLength,this.lengthType.encodingLength(e.length));encodingLength=e=>((0,s.checkDefined)(this.codecName,e,"array"),void 0===e?0:this.calcLength(e));encodeBytes=-1;decodeBytes=-1;constructor(e,t){this.lengthType=e,this.anyCodec=t}encode=(e,t,n=0)=>(t||(t=Buffer.allocUnsafe(this.calcLength(e))),this.lengthType.encode(e.length,t,n),this.encodeBytes=i.calcAllLength(e,((e,n,o)=>(this.anyCodec.encode(e,t,o),this.anyCodec.encodeBytes)),this.lengthType.encodeBytes+n)-n,t);decode=(e,t=0,n)=>{t||(t=0);const o=new Array(this.lengthType.decode(e,t,n));return this.decodeBytes=i.calcAllLength(o,((t,r,c)=>(o[r||0]=this.anyCodec.decode(e,c,n),this.anyCodec.decodeBytes)),this.lengthType.decodeBytes+t)-t,o}}},5:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CVarBuffer=void 0;const o=n(758);t.CVarBuffer=class{codecName="VarBuffer";anyCodec;encodingLength;encodeBytes;decodeBytes;constructor(e){this.anyCodec=e,this.encodeBytes=0,this.decodeBytes=0,this.encodingLength=e=>((0,o.checkDefined)(this.codecName,e,"buffer"),void 0!==e?this.anyCodec.encodingLength(e.length)+e.length:0)}encode=(e,t,n=0)=>{const r=this.encodingLength(e);return t?(0,o.checkBufferLengthForEncode)(this.codecName,t,n,r):t=Buffer.allocUnsafe(r),this.anyCodec.encode(e.length,t,n),n+=this.anyCodec.encodeBytes,e.copy(t,n),this.encodeBytes=r,t};decode=(e,t=0,n)=>{void 0===n&&(n=e.length);const r=t,c=this.anyCodec.decode(e,t,n);return t+=this.anyCodec.decodeBytes,(0,o.checkBufferLengthForDecode)(this.codecName,t,n,c),this.decodeBytes=t+c-r,Buffer.from(e.slice(t,t+c))}}},513:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CVarString=void 0;const o=n(758),r=n(5);t.CVarString=class{codecName="CVarString";anyCodec;encodingType;varBufferCodec;encodingLength;encodeBytes;decodeBytes;constructor(e,t="utf8"){this.anyCodec=e,this.encodingType=t,this.varBufferCodec=new r.CVarBuffer(e),this.encodeBytes=0,this.decodeBytes=0,this.encodingLength=e=>{if((0,o.checkDefined)(this.codecName,e,"string"),void 0===e)return 0;const t=Buffer.byteLength(e,this.encodingType);return this.anyCodec.encodingLength(e.length)+t}}encode=(e,t,n=0)=>{const o=Buffer.byteLength(e,this.encodingType),r=this.anyCodec.encodingLength(e.length)+o;if(t||(t=Buffer.allocUnsafe(r)),n+r>t.length)throw new RangeError("destination buffer is too small");return this.anyCodec.encode(o,t,n),n+=this.anyCodec.encodeBytes,t.write(e,n,o,this.encodingType),this.encodeBytes=r,t};decode=(e,t=0,n)=>{const o=this.varBufferCodec.decode(e,t,n).toString(this.encodingType);return this.decodeBytes=this.varBufferCodec.decodeBytes,o}}},492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CVarUIntBitcoin=void 0;const o=n(758);t.CVarUIntBitcoin=class{codecName="VarUIntBitcoin";MAX_SAFE_INTEGER=9007199254740991;checkUInt53=e=>{(e<0||e>this.MAX_SAFE_INTEGER)&&(0,o.rangeError)(this.codecName,`out of range value. min = 0, max = ${this.MAX_SAFE_INTEGER}, value = ${e}`),e%1!=0&&(0,o.typeError)(this.codecName,`value is not an integer. value = ${e}`)};encodeBytes;decodeBytes;encodingLength;constructor(){this.encodeBytes=0,this.decodeBytes=0,this.encodingLength=e=>((0,o.checkDefined)(this.codecName,e,"number"),void 0===e?0:(this.checkUInt53(e),e<253?1:e<=65535?3:e<=4294967295?5:9))}encode=(e,t,n=0)=>(t||(t=Buffer.allocUnsafe(this.encodingLength(e))),e<253?(t.writeUInt8(e,n),this.encodeBytes=1):e<=65535?(t.writeUInt8(253,n),t.writeUInt16LE(e,n+1),this.encodeBytes=3):e<=4294967295?(t.writeUInt8(254,n),t.writeUInt32LE(e,n+1),this.encodeBytes=5):(t.writeUInt8(255,n),t.writeUInt32LE(e>>>0,n+1),t.writeUInt32LE(e/4294967296|0,n+5),this.encodeBytes=9),t);decode=(e,t=0,n)=>{const o=e.readUInt8(t);if(o<253)return this.decodeBytes=1,o;if(253===o)return this.decodeBytes=3,e.readUInt16LE(t+1);if(254===o)return this.decodeBytes=5,e.readUInt32LE(t+1);this.decodeBytes=9;var r=e.readUInt32LE(t+1),c=4294967296*e.readUInt32LE(t+5)+r;return this.checkUInt53(c),c}}},960:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NumberTypes=void 0,(n=t.NumberTypes||(t.NumberTypes={})).Byte="UInt8",n.Int8="Int8",n.UInt8="UInt8",n.Int16BE="Int16BE",n.Int16LE="Int16LE",n.UInt16BE="UInt16BE",n.UInt16LE="UInt16LE",n.Int32BE="Int32BE",n.Int32LE="Int32LE",n.UInt32BE="UInt32BE",n.UInt32LE="UInt32LE",n.Int64BE="Int64BE",n.Int64LE="Int64LE",n.UInt64BE="UInt64BE",n.UInt64LE="UInt64LE",n.FloatBE="FloatBE",n.FloatLE="FloatLE",n.DoubleBE="DoubleBE",n.DoubleLE="DoubleLE"},882:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calcAllLength=void 0,t.calcAllLength=(e,t,n=0)=>{let o=n;for(let n=0;n<e.length;n++)o+=t(e[n],n,o);return o}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var c=t[o]={exports:{}};return e[o].call(c.exports,c,c.exports,n),c.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});const t=n(960),r=n(68),c=n(157),i=n(483),s=n(193),d=n(759),h=n(129),a=n(161),u=n(5),l=n(513),f=n(492),g={AllBuffer:new r.CAllBuffer,Array:(e,t)=>new c.CArray(e,t),Buffer:e=>new i.CBuffer(e),Byte:new s.CNumber(t.NumberTypes.UInt8,1),Number:{Int8:new s.CNumber(t.NumberTypes.Int8,1),UInt8:new s.CNumber(t.NumberTypes.UInt8,1),Int16BE:new s.CNumber(t.NumberTypes.Int16BE,2),Int16LE:new s.CNumber(t.NumberTypes.Int16LE,2),UInt16BE:new s.CNumber(t.NumberTypes.UInt16BE,2),UInt16LE:new s.CNumber(t.NumberTypes.UInt16LE,2),Int32BE:new s.CNumber(t.NumberTypes.Int32BE,4),Int32LE:new s.CNumber(t.NumberTypes.Int32LE,4),UInt32BE:new s.CNumber(t.NumberTypes.UInt32BE,4),UInt32LE:new s.CNumber(t.NumberTypes.UInt32LE,4),Int64BE:new s.CNumber(t.NumberTypes.Int64BE,8),Int64LE:new s.CNumber(t.NumberTypes.Int64LE,8),UInt64BE:new s.CNumber(t.NumberTypes.UInt64BE,8),UInt64LE:new s.CNumber(t.NumberTypes.UInt64LE,8),FloatBE:new s.CNumber(t.NumberTypes.FloatBE,4),FloatLE:new s.CNumber(t.NumberTypes.FloatLE,4),DoubleBE:new s.CNumber(t.NumberTypes.DoubleBE,8),DoubleLE:new s.CNumber(t.NumberTypes.DoubleLE,8)},Object:e=>new d.CObject(e),String:(e,t="utf8")=>new h.CString(e,t),VarArray:(e,t)=>new a.CVarArray(e,t),VarBuffer:e=>new u.CVarBuffer(e),VarString:(e,t="utf8")=>new l.CVarString(e,t),VarUIntBitcoin:new f.CVarUIntBitcoin};e.default=g})(),module.exports=o})();
//# sourceMappingURL=index.js.map